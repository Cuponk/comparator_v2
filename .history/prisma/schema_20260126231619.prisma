// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model player {
  id        Int      @id
  full_name String
  first_name String
  last_name  String
  position   String
  position_category String
  batting_hand String
  throwing_hand String
  height     String
  height_inches Int
  weight     Int
  birth_date DateTime
  birth_city String
  birth_state String
  birth_country String
  debut_date DateTime
  final_game_date DateTime?
  active     Boolean
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model team {
  id           Int      @id
  name         String
  abbreviation String
  league       String
  division     String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

/*
batting_stats
Season and career batting statistics for each player.

Column	Type	Notes
id	INTEGER, PK	Auto-generated
player_id	INTEGER, FK	References players.id
season	INTEGER, nullable	Year (null for career totals)
is_career	BOOLEAN	True if this row is career totals
team_id	INTEGER, nullable	Team during this season
team_name	STRING, nullable	Team name for display
Basic Stats:

Column	Type	Description
games	INTEGER	Games played (G)
plate_appearances	INTEGER	Plate appearances (PA)
at_bats	INTEGER	At bats (AB)
runs	INTEGER	Runs scored (R)
hits	INTEGER	Hits (H)
doubles	INTEGER	Doubles (2B)
triples	INTEGER	Triples (3B)
home_runs	INTEGER	Home runs (HR)
rbi	INTEGER	Runs batted in (RBI)
stolen_bases	INTEGER	Stolen bases (SB)
caught_stealing	INTEGER	Caught stealing (CS)
walks	INTEGER	Walks (BB)
strikeouts	INTEGER	Strikeouts (SO)
hit_by_pitch	INTEGER	Hit by pitch (HBP)
sacrifice_flies	INTEGER	Sacrifice flies (SF)
sacrifice_bunts	INTEGER	Sacrifice bunts (SAC)
ground_into_dp	INTEGER	Grounded into double play (GIDP)
batting_average	DECIMAL(4,3)	Batting average (AVG)
on_base_percentage	DECIMAL(4,3)	On-base percentage (OBP)
slugging_percentage	DECIMAL(4,3)	Slugging percentage (SLG)
ops	DECIMAL(4,3)	On-base plus slugging (OPS)
Advanced Stats:

Column	Type	Description
war	DECIMAL(3,1)	Wins Above Replacement
wpa	DECIMAL(4,2)	Win Probability Added
woba	DECIMAL(4,3)	Weighted On-Base Average
wrc_plus	INTEGER	Weighted Runs Created Plus (100 = league avg)
iso	DECIMAL(4,3)	Isolated Power (SLG - AVG)
babip	DECIMAL(4,3)	Batting Avg on Balls In Play
exit_velocity	DECIMAL(4,1)	Average exit velocity (mph)
launch_angle	DECIMAL(4,1)	Average launch angle (degrees)
barrel_percentage	DECIMAL(4,1)	Barrel rate (%)
hard_hit_percentage	DECIMAL(4,1)	Hard hit rate (%)
Unique constraint: (player_id, season, team_id) â€” one row per player per team per season

pitching_stats
Season and career pitching statistics for each player.

Column	Type	Notes
id	INTEGER, PK	Auto-generated
player_id	INTEGER, FK	References players.id
season	INTEGER, nullable	Year (null for career totals)
is_career	BOOLEAN	True if this row is career totals
team_id	INTEGER, nullable	Team during this season
team_name	STRING, nullable	Team name for display
Basic Stats:

Column	Type	Description
wins	INTEGER	Wins (W)
losses	INTEGER	Losses (L)
era	DECIMAL(4,2)	Earned Run Average
games	INTEGER	Games pitched (G)
games_started	INTEGER	Games started (GS)
games_finished	INTEGER	Games finished (GF)
complete_games	INTEGER	Complete games (CG)
shutouts	INTEGER	Shutouts (SHO)
saves	INTEGER	Saves (SV)
save_opportunities	INTEGER	Save opportunities (SVO)
holds	INTEGER	Holds (HLD)
innings_pitched	DECIMAL(5,1)	Innings pitched (IP)
hits	INTEGER	Hits allowed (H)
runs	INTEGER	Runs allowed (R)
earned_runs	INTEGER	Earned runs (ER)
home_runs	INTEGER	Home runs allowed (HR)
walks	INTEGER	Walks (BB)
intentional_walks	INTEGER	Intentional walks (IBB)
strikeouts	INTEGER	Strikeouts (K)
hit_batters	INTEGER	Hit batters (HB)
wild_pitches	INTEGER	Wild pitches (WP)
balks	INTEGER	Balks (BK)
whip	DECIMAL(4,2)	Walks + Hits per IP
batting_avg_against	DECIMAL(4,3)	Opponent batting average
Advanced Stats:

Column	Type	Description
war	DECIMAL(3,1)	Wins Above Replacement
fip	DECIMAL(4,2)	Fielding Independent Pitching
xfip	DECIMAL(4,2)	Expected FIP
era_plus	INTEGER	ERA+ (100 = league average)
siera	DECIMAL(4,2)	Skill-Interactive ERA
k_percentage	DECIMAL(4,1)	Strikeout rate (K%)
bb_percentage	DECIMAL(4,1)	Walk rate (BB%)
k_bb_ratio	DECIMAL(4,2)	K/BB ratio
hr_per_9	DECIMAL(4,2)	Home runs per 9 innings
k_per_9	DECIMAL(4,2)	Strikeouts per 9 innings
bb_per_9	DECIMAL(4,2)	Walks per 9 innings
gb_percentage	DECIMAL(4,1)	Ground ball rate (GB%)
fb_percentage	DECIMAL(4,1)	Fly ball rate (FB%)
Unique constraint: (player_id, season, team_id)

batting_game_logs
Individual game batting performance for trend analysis.

Column	Type	Notes
id	INTEGER, PK	Auto-generated
player_id	INTEGER, FK	References players.id
season	INTEGER	Year
game_id	STRING	MLB Game ID (gamePk)
game_date	DATE	Date of the game
opponent_team_id	INTEGER	Opponent team ID
opponent_team_name	STRING	Opponent team name
is_home	BOOLEAN	Home or away game
game_result	STRING	e.g., "W 5-3", "L 2-4"
batting_order	INTEGER	Position in lineup (1-9)
position_played	STRING	Position(s) played this game
at_bats	INTEGER	AB
runs	INTEGER	R
hits	INTEGER	H
doubles	INTEGER	2B
triples	INTEGER	3B
home_runs	INTEGER	HR
rbi	INTEGER	RBI
walks	INTEGER	BB
strikeouts	INTEGER	SO
stolen_bases	INTEGER	SB
caught_stealing	INTEGER	CS
hit_by_pitch	INTEGER	HBP
sacrifice_flies	INTEGER	SF
avg_season_to_date	DECIMAL(4,3)	Running season AVG
ops_season_to_date	DECIMAL(4,3)	Running season OPS
Unique constraint: (player_id, game_id) Index: (player_id, season, game_date) for chronological queries

pitching_game_logs
Individual game pitching performance for trend analysis.

Column	Type	Notes
id	INTEGER, PK	Auto-generated
player_id	INTEGER, FK	References players.id
season	INTEGER	Year
game_id	STRING	MLB Game ID (gamePk)
game_date	DATE	Date of the game
opponent_team_id	INTEGER	Opponent team ID
opponent_team_name	STRING	Opponent team name
is_home	BOOLEAN	Home or away game
game_result	STRING	e.g., "W 5-3"
decision	STRING, nullable	W, L, S (save), H (hold), BS (blown save), or null
is_start	BOOLEAN	Started the game
innings_pitched	DECIMAL(4,1)	IP (e.g., 6.2 = 6 2/3 innings)
hits	INTEGER	H
runs	INTEGER	R
earned_runs	INTEGER	ER
walks	INTEGER	BB
strikeouts	INTEGER	K
home_runs	INTEGER	HR
pitches_thrown	INTEGER	Total pitches
strikes	INTEGER	Total strikes
balls	INTEGER	Total balls
era_season_to_date	DECIMAL(4,2)	Running season ERA
Unique constraint: (player_id, game_id) Index: (player_id, season, game_date)

player_awards
Awards and accolades for each player.

Column	Type	Notes
id	INTEGER, PK	Auto-generated
player_id	INTEGER, FK	References players.id
award_type	STRING	See award types below
season	INTEGER	Year awarded
league	STRING, nullable	'AL', 'NL', or null
team_id	INTEGER, nullable	Team at time of award
team_name	STRING, nullable	Team name

*/

model awards {
  id         Int      @id
  player_id  Int
  award_type String
  season     Int
  league     String?
  team_id    Int?
  team_name  String?

  @@index([player_id])
}

model batting_stats {
  id                     Int      @id
  player_id              Int
  season                 Int?
  is_career              Boolean
  team_id                Int?
  team_name              String?
  games                  Int
  plate_appearances      Int
  at_bats                Int
  runs                   Int
  hits                   Int
  doubles                Int
  triples                Int
  home_runs              Int
  rbi                    Int
  stolen_bases           Int
  caught_stealing        Int
  walks                  Int
  strikeouts             Int
  hit_by_pitch           Int
  sacrifice_flies        Int
  sacrifice_bunts        Int
  ground_into_dp         Int
  batting_average        Float
  on_base_percentage     Float
  slugging_percentage    Float
  ops                    Float
  war                    Float
  wpa                    Float
  woba                   Float
  wrc_plus               Int
  iso                    Float
  babip                  Float

  @@index([player_id, season, team_id])
}

model pitching_stats {
  id                     Int      @id
  player_id              Int
  season                 Int?
  is_career              Boolean
  team_id                Int?
  team_name              String?
  wins                   Int
  losses                 Int
  era                    Float
  games                  Int
  games_started          Int
  games_finished         Int
  complete_games         Int
  shutouts               Int
  saves                  Int
  save_opportunities     Int
  holds                  Int
  innings_pitched        Float
  hits                   Int
  runs                   Int
  earned_runs            Int
  home_runs              Int
  walks                  Int
  intentional_walks      Int
  strikeouts             Int
  hit_batters            Int
  wild_pitches           Int
  balks                  Int
  whip                   Float
  batting_avg_against    Float
  war                    Float
  fip                    Float
  xfip                   Float
  era_plus               Int
  siera                  Float
  k_percentage           Float
  bb_percentage          Float
  k_bb_ratio             Float
  hr_per_9               Float
  k_per_9                Float
  bb_per_9               Float
  gb_percentage          Float
  fb_percentage          Float

  @@index([player_id, season, team_id])
}

model batting_game_logs {
  id                     Int      @id
  player_id              Int
  season                 Int
  game_id                String
  game_date              DateTime
  opponent_team_id       Int
  opponent_team_name     String
  is_home                Boolean
  game_result            String
  batting_order          Int
  position_played        String
  at_bats                Int
  runs                   Int
  hits                   Int
  doubles                Int
  triples                Int
  home_runs              Int
  rbi                    Int
  walks                  Int
  strikeouts             Int
  stolen_bases           Int
  caught_stealing        Int
  hit_by_pitch           Int
  sacrifice_flies        Int
  avg_season_to_date     Float
  ops_season_to_date     Float

  @@index([player_id, season, game_date])
}

model pitching_game_logs {
  id                     Int      @id
  player_id              Int
  season                 Int
  game_id                String
  game_date              DateTime
  opponent_team_id       Int
  opponent_team_name     String
  is_home                Boolean
  game_result            String
  decision               String?
  is_start               Boolean
  innings_pitched       Float
  hits                   Int
  runs                   Int
  earned_runs            Int
  walks                  Int
  strikeouts             Int
  home_runs              Int
  pitches_thrown         Int
  strikes                Int
  balls                  Int
  era_season_to_date     Float

  @@index([player_id, season, game_date])
}
